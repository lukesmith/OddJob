version: 1.0.{build}
image: Visual Studio 2017

pull_requests:
  do_not_increment_build_number: true

configuration: Release

install:
- cmd: >-
    dotnet restore

build_script:
- ps: >-
    dotnet build --configuration Release /property:Version={version}

    dotnet pack --configuration Release --no-build OddJob/OddJob.csproj --include-symbols

build:
  verbosity: minimal
  publish_nuget: true
  publish_nuget_symbols: true

test_script:
- ps: dotnet test --configuration Release --no-build OddJob.Tests/OddJob.Tests.csproj
